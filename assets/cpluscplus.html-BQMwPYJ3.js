import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o,c as p,d as n,f as s,a,e}from"./app-BxWejgo5.js";const c={},r={class:"hint-container tip"},u=n("p",{class:"hint-container-title"},"提示",-1),d={href:"https://learn.microsoft.com/zh-cn/dotnet/framework/interop/",target:"_blank",rel:"noopener noreferrer"},m={id:"数据类型对照",tabindex:"-1"},k={class:"header-anchor",href:"#数据类型对照"},v={href:"https://learn.microsoft.com/zh-cn/dotnet/framework/interop/marshalling-data-with-platform-invoke",target:"_blank",rel:"noopener noreferrer"},g=n("th",{style:{"text-align":"left"}},"Windows API中的非托管类型",-1),h={style:{"text-align":"left"}},b={href:"https://learn.microsoft.com/zh-cn/cpp/cpp/data-type-ranges?view=msvc-170",target:"_blank",rel:"noopener noreferrer"},f={style:{"text-align":"left"}},y={href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/built-in-types",target:"_blank",rel:"noopener noreferrer"},x=n("th",{style:{"text-align":"left"}},"描述",-1),_=n("tbody",null,[n("tr",null,[n("td",{style:{"text-align":"left"}},"VOID"),n("td",{style:{"text-align":"left"}},"void"),n("td",{style:{"text-align":"left"}},"System.Void"),n("td",{style:{"text-align":"left"}},"应用于不返回值的函数")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"HANDLE"),n("td",{style:{"text-align":"left"}},"void*"),n("td",{style:{"text-align":"left"}},"System.IntPtr或System.UIntPtr"),n("td",{style:{"text-align":"left"}},"在32位Windows操作系统上为32位、在64位Windows操作系统上为64位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"BYTE"),n("td",{style:{"text-align":"left"}},"usigned char"),n("td",{style:{"text-align":"left"}},"System.Byte"),n("td",{style:{"text-align":"left"}},"8位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"SHORT"),n("td",{style:{"text-align":"left"}},"short"),n("td",{style:{"text-align":"left"}},"System.Int16"),n("td",{style:{"text-align":"left"}},"16位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"WORD"),n("td",{style:{"text-align":"left"}},"usigned short"),n("td",{style:{"text-align":"left"}},"System.UInt16"),n("td",{style:{"text-align":"left"}},"16位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"INT"),n("td",{style:{"text-align":"left"}},"int"),n("td",{style:{"text-align":"left"}},"System.Int16"),n("td",{style:{"text-align":"left"}},"32位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"UINT"),n("td",{style:{"text-align":"left"}},"unsigned int"),n("td",{style:{"text-align":"left"}},"System.UInt32"),n("td",{style:{"text-align":"left"}},"32位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"LONG"),n("td",{style:{"text-align":"left"}},"long"),n("td",{style:{"text-align":"left"}},"System.Int32"),n("td",{style:{"text-align":"left"}},"32位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"BOOL"),n("td",{style:{"text-align":"left"}},"long"),n("td",{style:{"text-align":"left"}},"System.Boolean或System.Int32"),n("td",{style:{"text-align":"left"}},"32位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"DWORD"),n("td",{style:{"text-align":"left"}},"unsigned long"),n("td",{style:{"text-align":"left"}},"System.UInt32"),n("td",{style:{"text-align":"left"}},"32位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"ULONG"),n("td",{style:{"text-align":"left"}},"unsigned long"),n("td",{style:{"text-align":"left"}},"System.UInt32"),n("td",{style:{"text-align":"left"}},"32位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"CHAR"),n("td",{style:{"text-align":"left"}},"char"),n("td",{style:{"text-align":"left"}},"System.Char"),n("td",{style:{"text-align":"left"}},"用ANSI修饰")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"WCHAR"),n("td",{style:{"text-align":"left"}},"wchar_t"),n("td",{style:{"text-align":"left"}},"System.Char"),n("td",{style:{"text-align":"left"}},"用Unicode修饰")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"LPSTR"),n("td",{style:{"text-align":"left"}},"char *"),n("td",{style:{"text-align":"left"}},"System.String或System.Text.StringBuilder"),n("td",{style:{"text-align":"left"}},"用ANSI修饰")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"LPCSTR"),n("td",{style:{"text-align":"left"}},"const char *"),n("td",{style:{"text-align":"left"}},"System.String或System.Text.StringBuilder"),n("td",{style:{"text-align":"left"}},"用ANSI修饰")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"LPWSTR"),n("td",{style:{"text-align":"left"}},"wchar_t *"),n("td",{style:{"text-align":"left"}},"System.String或System.Text.StringBuilder"),n("td",{style:{"text-align":"left"}},"用Unicode修饰")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"LPCWSTR"),n("td",{style:{"text-align":"left"}},"const wchar_t *"),n("td",{style:{"text-align":"left"}},"System.String"),n("td",{style:{"text-align":"left"}},"用Unicode修饰")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"FLOAT"),n("td",{style:{"text-align":"left"}},"float"),n("td",{style:{"text-align":"left"}},"System.Single"),n("td",{style:{"text-align":"left"}},"32位")]),n("tr",null,[n("td",{style:{"text-align":"left"}},"DOUBLE"),n("td",{style:{"text-align":"left"}},"double"),n("td",{style:{"text-align":"left"}},"System.Double"),n("td",{style:{"text-align":"left"}},"64位")])],-1),C=n("h2",{id:"c-动态连接库",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#c-动态连接库"},[n("span",null,"C++动态连接库")])],-1),S=n("h3",{id:"声明头文件",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#声明头文件"},[n("span",null,"声明头文件")])],-1),w=n("p",null,[s("创建头文件"),n("code",null,"HelloCplusPlus.h")],-1),P={href:"https://learn.microsoft.com/zh-cn/cpp/build/exporting-from-a-dll-using-declspec-dllexport?view=msvc-170",target:"_blank",rel:"noopener noreferrer"},q={href:"https://learn.microsoft.com/zh-cn/cpp/cpp/extern-cpp?view=msvc-170#extern-c-and-extern-c-function-declarations",target:"_blank",rel:"noopener noreferrer"},D=e(`<div class="language-c++ line-numbers-mode" data-ext="c++" data-title="c++"><pre class="language-c++"><code>#pragma once

#ifndef  HelloCPlusPlusDll

#define  HelloCPlusPlusDll

//宏定义导出
#ifdef  HelloCPlusPlusDll
#define HelloCPlusPlusDll __declspec(dllexport)//导出
#else
#define HelloCPlusPlusDll __declspec(dllimport)//导入
#endif

HelloCPlusPlusDll int __stdcall Add(int, int);

extern &quot;C&quot; {
    HelloCPlusPlusDll  int __stdcall Sub(int, int);
}

class HelloCPlusPlusDll C
{
public:
    static int Mul(int, int);
};

class HelloCPlusPlusDll S
{
public:
    int Div(int, int);
};

#endif
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实现头文件" tabindex="-1"><a class="header-anchor" href="#实现头文件"><span>实现头文件</span></a></h3><p>创建源文件<code>HelloCplusPlus.cpp</code></p><div class="language-c++ line-numbers-mode" data-ext="c++" data-title="c++"><pre class="language-c++"><code>#include &quot;HelloCPlusPlus.h&quot;
#include &lt;iostream&gt;

using namespace std;

int Add(int a, int b) {
    return a + b;
}

int Sub(int a, int b) {
    return a - b;
}

int C::Mul(int a, int b) {
    return a * b;
}

int S::Div(int a, int b) {
    return a / b;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编译" tabindex="-1"><a class="header-anchor" href="#编译"><span>编译</span></a></h3><p>在<code>配置属性\\常规\\配置类型</code>改为<code>动态库(.dll)</code></p><h3 id="查看导出类型" tabindex="-1"><a class="header-anchor" href="#查看导出类型"><span>查看导出类型</span></a></h3>`,7),H=n("code",null,"Developer Command Prompt for VS2022",-1),I={href:"https://learn.microsoft.com/zh-cn/cpp/build/reference/dumpbin-reference?view=msvc-170",target:"_blank",rel:"noopener noreferrer"},L=e(`<p>输入<code>dumpbin /exports project1.dll</code></p><figure><img src="https://nas.ilyl.life:8092/cplusplus/dumpbin.png" alt="导出定义" tabindex="0" loading="lazy"><figcaption>导出定义</figcaption></figure><p>发现通过<code>extern &quot;C&quot;</code>导出的名称与定义一致，这也是C#调用C++提升找不到入口点的原因之一</p><h2 id="调用" tabindex="-1"><a class="header-anchor" href="#调用"><span>调用</span></a></h2><h3 id="cplusplus调用" tabindex="-1"><a class="header-anchor" href="#cplusplus调用"><span>CPlusPlus调用</span></a></h3><ol><li>新建控制台项目</li><li>新建<code>include</code>文件夹，拷贝<code>HelloCPlusPlus.h</code>头文件</li><li>新建<code>libs</code>文件夹，拷贝生成的<code>lib</code>、<code>dll</code>文件</li><li>打开<code>配置属性\\VC++目录\\</code>在<code>包含目录</code>添加<code>include</code>文件夹</li><li>打开<code>配置属性\\链接器\\常规</code>下的<code>附加库目录</code>添加<code>libs</code>文件夹</li><li>打开<code>配置属性\\链接器\\输入</code>下的<code>附加依赖项</code>添加<code>project.lib</code>文件</li></ol><div class="hint-container tip"><p class="hint-container-title">提示</p><p>可以不配置链接器，直接引用项目即可</p></div><div class="language-c++ line-numbers-mode" data-ext="c++" data-title="c++"><pre class="language-c++"><code>#include &lt;iostream&gt;
#include&lt;HelloCPlusPlus.h&gt;
using namespace std;
int main()
{
    int a= Add(1, 2);
    cout &lt;&lt; &quot;1+2=&quot;&lt;&lt; a &lt;&lt; endl;

    int a1 = Sub(2, 1);
    cout &lt;&lt; &quot;2-1=&quot;&lt;&lt;a1 &lt;&lt; endl;

    C helloC;
    int a2 = helloC.Mul(2, 3);
    cout &lt;&lt; &quot;2*3=&quot; &lt;&lt; a2 &lt;&lt; endl;

    S helloS;
    int a3 = helloS.Div(4, 2);
    cout &lt;&lt; &quot;4/2=&quot; &lt;&lt;a3 &lt;&lt; endl;
}

//输出
//1+2=3
//2-1=1
//2*3=6
//4/2=2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="csharp调用" tabindex="-1"><a class="header-anchor" href="#csharp调用"><span>CSharp调用</span></a></h3>`,9),T={href:"https://learn.microsoft.com/zh-cn/dotnet/framework/interop/consuming-unmanaged-dll-functions",target:"_blank",rel:"noopener noreferrer"},A=e(`<p>引用<code>using System.Runtime.InteropServices;</code></p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>InteropServices</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">short</span></span> a <span class="token operator">=</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;1+2=</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">a</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">short</span></span> a1 <span class="token operator">=</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;2-1=</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">a1</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">short</span></span> a2 <span class="token operator">=</span> <span class="token function">Mul</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;2*3=</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">a2</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name"><span class="token keyword">short</span></span> a3 <span class="token operator">=</span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;4/2=</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">a3</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">@&quot;.\\lib\\Project1.dll&quot;</span><span class="token punctuation">,</span>CharSet <span class="token operator">=</span>CharSet<span class="token punctuation">.</span>Unicode<span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;?Add@@YAHHH@Z&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">short</span></span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">short</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">short</span></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">@&quot;.\\lib\\Project1.dll&quot;</span><span class="token punctuation">,</span> CharSet <span class="token operator">=</span> CharSet<span class="token punctuation">.</span>Unicode<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">short</span></span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">short</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">short</span></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">@&quot;.\\lib\\Project1.dll&quot;</span><span class="token punctuation">,</span> CharSet <span class="token operator">=</span> CharSet<span class="token punctuation">.</span>Unicode<span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;?Mul@C@@SAHHH@Z&quot;</span><span class="token punctuation">,</span> CallingConvention <span class="token operator">=</span> CallingConvention<span class="token punctuation">.</span>Cdecl<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">short</span></span> <span class="token function">Mul</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">short</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">short</span></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">@&quot;.\\lib\\Project1.dll&quot;</span><span class="token punctuation">,</span> CharSet <span class="token operator">=</span> CharSet<span class="token punctuation">.</span>Unicode<span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;?Div@S@@QEAAHHH@Z&quot;</span><span class="token punctuation">,</span> CallingConvention <span class="token operator">=</span> CallingConvention<span class="token punctuation">.</span>Cdecl<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">short</span></span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">short</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">short</span></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//输出</span>
<span class="token comment">//1+2=3</span>
<span class="token comment">//2-1=1</span>
<span class="token comment">//2*3=6</span>
<span class="token comment">//4/2=0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),U=n("code",null,"Div",-1),z={href:"https://learn.microsoft.com/zh-cn/visualstudio/debugger/how-to-debug-managed-and-native-code?view=vs-2022",target:"_blank",rel:"noopener noreferrer"},N=e(`<div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> a3 <span class="token operator">=</span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;4/2=</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">a3</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">@&quot;.\\lib\\Project1.dll&quot;</span><span class="token punctuation">,</span> CharSet <span class="token operator">=</span> CharSet<span class="token punctuation">.</span>Unicode<span class="token punctuation">,</span> EntryPoint <span class="token operator">=</span> <span class="token string">&quot;?Div@S@@QEAAHHH@Z&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">short</span></span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">short</span></span> i<span class="token punctuation">,</span><span class="token class-name"><span class="token keyword">short</span></span> a<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">short</span></span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//输出</span>
<span class="token comment">//4/2=2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结果按预期输出，为什么多加一个参数可以?。</p>`,2);function W(E,O){const t=i("ExternalLinkIcon");return o(),p("div",null,[n("div",r,[u,n("p",null,[s("参考资料"),n("a",d,[s("与非托管代码进行交互操作"),a(t)])])]),n("h2",m,[n("a",k,[n("span",null,[n("a",v,[s("数据类型对照"),a(t)])])])]),n("table",null,[n("thead",null,[n("tr",null,[g,n("th",h,[n("a",b,[s("非托管C语言类型"),a(t)])]),n("th",f,[n("a",y,[s("托管类型"),a(t)])]),x])]),_]),C,S,w,n("p",null,[s("通过"),n("a",P,[s("__declspec(dllexport)"),a(t)]),s("导出DLL文件")]),n("p",null,[s("分为函数导出、类导出、静态类导出以及"),n("a",q,[s('extern "C"'),a(t)]),s("导出")]),D,n("p",null,[s("安装VS后，打开"),H,s("，利用"),n("a",I,[s("dumpbin"),a(t)]),s("查看定义")]),L,n("p",null,[s("使用"),n("a",T,[s("DllImport"),a(t)]),s("访问非托管函数")]),A,n("p",null,[s("发现"),U,s("函数输出结果不正确，"),n("a",z,[s("调试C#与C++代码"),a(t)]),s("发现传递两个参数，结果C++代码接收的参数多一个，调整代码")]),N])}const Z=l(c,[["render",W],["__file","cpluscplus.html.vue"]]),V=JSON.parse('{"path":"/tools/csharp/cpluscplus.html","title":"调用C++","lang":"zh-CN","frontmatter":{"title":"调用C++","date":"2024-02-27T00:00:00.000Z","editLink":false,"footer":false,"isOriginal":true,"category":["工具箱"],"tag":["C#","C++"],"description":" 提示 参考资料与非托管代码进行交互操作 数据类型对照 C++动态连接库 声明头文件 创建头文件HelloCplusPlus.h 通过__declspec(dllexport)导出DLL文件 分为函数导出、类导出、静态类导出以及extern \\"C\\"导出 实现头文件 创建源文件HelloCplusPlus.cpp 编译 在配置属性\\\\常规\\\\配置类型改为动态...","head":[["meta",{"property":"og:url","content":"https://ilyl.life/tools/csharp/cpluscplus.html"}],["meta",{"property":"og:site_name","content":"乌龙茶有点甜"}],["meta",{"property":"og:title","content":"调用C++"}],["meta",{"property":"og:description","content":" 提示 参考资料与非托管代码进行交互操作 数据类型对照 C++动态连接库 声明头文件 创建头文件HelloCplusPlus.h 通过__declspec(dllexport)导出DLL文件 分为函数导出、类导出、静态类导出以及extern \\"C\\"导出 实现头文件 创建源文件HelloCplusPlus.cpp 编译 在配置属性\\\\常规\\\\配置类型改为动态..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://nas.ilyl.life:8092/cplusplus/dumpbin.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-28T05:08:40.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"调用C++"}],["meta",{"property":"article:author","content":"乌龙茶"}],["meta",{"property":"article:tag","content":"C#"}],["meta",{"property":"article:tag","content":"C++"}],["meta",{"property":"article:published_time","content":"2024-02-27T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-28T05:08:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"调用C++\\",\\"image\\":[\\"https://nas.ilyl.life:8092/cplusplus/dumpbin.png\\"],\\"datePublished\\":\\"2024-02-27T00:00:00.000Z\\",\\"dateModified\\":\\"2024-02-28T05:08:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"乌龙茶\\",\\"url\\":\\"https://ilyl.life\\",\\"email\\":\\"mailto:982474256@qq.com\\"}]}"]]},"headers":[{"level":2,"title":"数据类型对照","slug":"数据类型对照","link":"#数据类型对照","children":[]},{"level":2,"title":"C++动态连接库","slug":"c-动态连接库","link":"#c-动态连接库","children":[{"level":3,"title":"声明头文件","slug":"声明头文件","link":"#声明头文件","children":[]},{"level":3,"title":"实现头文件","slug":"实现头文件","link":"#实现头文件","children":[]},{"level":3,"title":"编译","slug":"编译","link":"#编译","children":[]},{"level":3,"title":"查看导出类型","slug":"查看导出类型","link":"#查看导出类型","children":[]}]},{"level":2,"title":"调用","slug":"调用","link":"#调用","children":[{"level":3,"title":"CPlusPlus调用","slug":"cplusplus调用","link":"#cplusplus调用","children":[]},{"level":3,"title":"CSharp调用","slug":"csharp调用","link":"#csharp调用","children":[]}]}],"git":{"createdTime":1709096920000,"updatedTime":1709096920000,"contributors":[{"name":"乌龙茶","email":"982474256@qq.com","commits":1}]},"readingTime":{"minutes":3.29,"words":986},"filePathRelative":"tools/csharp/cpluscplus.md","localizedDate":"2024年2月27日","excerpt":"<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>参考资料<a href=\\"https://learn.microsoft.com/zh-cn/dotnet/framework/interop/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">与非托管代码进行交互操作</a></p>\\n</div>\\n<h2><a class=\\"header-anchor\\" href=\\"#数据类型对照\\"><span></span></a><a href=\\"https://learn.microsoft.com/zh-cn/dotnet/framework/interop/marshalling-data-with-platform-invoke\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">数据类型对照</a></h2>","autoDesc":true}');export{Z as comp,V as data};
