import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as n,o as r,c as d,d as e,f as t,a as o,w as s,e as i}from"./app-AjPgfRi4.js";const h={},g={href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"},u={href:"https://nginx.org/en/",target:"_blank",rel:"noopener noreferrer"},m=e("p",null,"以群晖为例:",-1),f=i('<h2 id="域名无法访问私有云" tabindex="-1"><a class="header-anchor" href="#域名无法访问私有云"><span>域名无法访问私有云</span></a></h2><p><code>Q</code>：一切配置正常，解析正常，测试正常，但就是无法通过域名访问私有云?</p><p><code>A</code>：<code>80</code>和<code>443</code>端口不对个人开放，需要加上非<code>80</code>和<code>443</code>端口。</p><h2 id="私有云动态ip问题" tabindex="-1"><a class="header-anchor" href="#私有云动态ip问题"><span>私有云动态IP问题</span></a></h2><p>域名绑定的是静态IP，但是私有云是动态的，体现在重启光猫后IP地址变动。</p>',5),_=e("li",null,[e("p",null,[t("在套件中心选择"),e("code",null,"Docker"),t("安装")])],-1),k=e("li",null,[e("p",null,[t("在注册表搜索"),e("code",null,"chenhw2/aliyun-ddns-cli:latest"),t(",并安装")])],-1),y={href:"https://ram.console.aliyun.com/overview",target:"_blank",rel:"noopener noreferrer"},x=e("code",null,"OpenApi调用访问",-1),w=e("figure",null,[e("img",{src:"https://nas.ilyl.life:8092/network/cloud1.png",alt:"添加新用户",width:"420",height:"200",tabindex:"0",loading:"lazy"}),e("figcaption",null,"添加新用户")],-1),S=i('<li><p>编辑基本信息，选择权限管理，个人权限，新增授权，选择<code>管理云解析(DNS)的权限</code></p><figure><img src="https://nas.ilyl.life:8092/network/cloud2.png" alt="授权" width="420" height="200" tabindex="0" loading="lazy"><figcaption>授权</figcaption></figure></li><li><p>记住新用户的<code>AccessKey ID</code>和<code>AccessKey Secret</code></p></li><li><p>在群晖Docker容器选项中，创建容器，选择<code>chenhw2/aliyun-ddns-cli:latest</code></p><figure><img src="https://nas.ilyl.life:8092/network/cloud3.png" alt="新建容器" width="420" height="200" tabindex="0" loading="lazy"><figcaption>新建容器</figcaption></figure></li><li><p>网络，选择默认<code>bridge</code></p><figure><img src="https://nas.ilyl.life:8092/network/cloud4.png" alt="网络" width="420" height="200" tabindex="0" loading="lazy"><figcaption>网络</figcaption></figure></li><li><p>常规设置，点击高级设置</p><p>AKID：对应用户的<code>AccessKey ID</code></p><p>AKSCT：应用用户的<code>AccessKey Secret</code></p><p>DOMAIN：对应自己的域名</p><figure><img src="https://nas.ilyl.life:8092/network/cloud5.png" alt="DNS同步" width="420" height="200" tabindex="0" loading="lazy"><figcaption>DNS同步</figcaption></figure></li>',5),T=i('<p>当前私有云地址变更时，会自动添加一条记录到阿里云的DNS解析里。</p><p>可以通过重启光猫，或者删除阿里云DNS所有解析，登录10分钟就能看到。</p><h2 id="私有云加域名和ssl" tabindex="-1"><a class="header-anchor" href="#私有云加域名和ssl"><span>私有云加域名和SSL</span></a></h2><h3 id="nas配置" tabindex="-1"><a class="header-anchor" href="#nas配置"><span>NAS配置</span></a></h3><ol><li><p>登录门户</p><p>DSM端口(HTTP)：<code>自定义端口</code></p><p>DSM端口(HTTPS)：<code>自定义端口</code></p><p><code>勾选</code>自动将DSM桌面的HTTP连接重定向到HTTPS</p></li><li><p>安全性</p><ol><li><p>证书</p><p>新增，导入SSL证书</p><p>设置，证书选择导入的SSL证书</p></li><li><p>防火墙</p><p>配置出入站端口</p></li></ol></li></ol><h3 id="路由器配置" tabindex="-1"><a class="header-anchor" href="#路由器配置"><span>路由器配置</span></a></h3><p>设置端口转发</p><h2 id="不输入端口访问私有云" tabindex="-1"><a class="header-anchor" href="#不输入端口访问私有云"><span>不输入端口访问私有云</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>子域名在主域名下，由于已经购买了一个域名，在解析设置时直接填写想要的子域名即可。</p><p>别忘了申请子域名对应的SSL证书。</p></div><p>需要明确的是，不输入端口是无法直接访问私有云的。</p><p>不能直接访问可以间接访问，通过输入主域名，跳转到子域名+端口上</p><p>例如：域名<code>a.com</code>，子域名<code>aa.a.com</code>，私有云内网IP<code>192.168.173.3:88</code>,公网域名:<code>aa.a.com:88</code></p><p>在浏览器上输入<code>a.com</code>自动跳转<code>aa.a.com:88</code>，也就解决了<code>域名无法访问私有云</code>的问题。</p>',13),D=e("p",null,[t("记录类型："),e("code",null,"显性URL-将域名重定向到另外一个地址")],-1),b=e("p",null,[t("主机记录："),e("code",null,"@")],-1),P=e("p",null,[t("记录值："),e("code",null,"302"),t(":"),e("code",null,"子域名加端口")],-1),A=e("figure",null,[e("img",{src:"https://nas.ilyl.life:8092/network/cloud6.png",alt:"显性URL",width:"420",height:"200",tabindex:"0",loading:"lazy"}),e("figcaption",null,"显性URL")],-1);function I(N,v){const l=n("ExternalLinkIcon"),c=n("Mermaid"),a=n("RouteLink");return r(),d("div",null,[e("p",null,[t("私有云部署离不开"),e("a",g,[t("Docker"),o(l)]),t("和"),e("a",u,[t("nginx"),o(l)])]),m,o(c,{id:"mermaid-6",code:"eJzT1dXlKsksyUm1Uni2tfH5im4ukEhaTn55ckZiUYmCTxAXl4JCcWlSelFiQYaCi18wkKug8HT+/KcTehV0dZ/N2PesYXlokI+urp3C07UTIBJWT1vXPN878fnq9U/7F0M0YJUCGgDUBRbwDEDXlJqXgmL3i+3rn0/Z+HTmCoiBqMZAGC/2rnnaPxFsaFsr1FAwA6ehfo5QDxGpPsCZkHIFkHpgOIH9huxmOBso83LGpueNq58umglSBHEDTmmglQA2sccB"}),f,e("ol",null,[_,k,e("li",null,[e("p",null,[t("进入阿里云"),e("a",y,[t("RAM访问控制"),o(l)]),t("添加新用户，勾选"),x]),w]),S]),T,e("p",null,[t("在"),o(a,{to:"/tools/nas/domain.html"},{default:s(()=>[t("域名配置")]),_:1}),t("上，其中有个解析设置，额外添加一条记录：")]),D,b,P,A])}const H=p(h,[["render",I],["__file","cloud.html.vue"]]),Z=JSON.parse('{"path":"/tools/nas/cloud.html","title":"私有云","lang":"zh-CN","frontmatter":{"title":"私有云","date":"2023-06-17T00:00:00.000Z","dir.order":5,"order":5,"category":["工具箱"],"tag":["网络"],"isOriginal":true,"editLink":false,"footer":false,"copy":true,"description":"私有云部署离不开Docker和nginx 以群晖为例: 域名无法访问私有云 Q：一切配置正常，解析正常，测试正常，但就是无法通过域名访问私有云? A：80和443端口不对个人开放，需要加上非80和443端口。 私有云动态IP问题 域名绑定的是静态IP，但是私有云是动态的，体现在重启光猫后IP地址变动。 在套件中心选择Docker安装 在注册表搜索che...","head":[["meta",{"property":"og:url","content":"https://ilyl.life/tools/nas/cloud.html"}],["meta",{"property":"og:site_name","content":"乌龙茶有点甜"}],["meta",{"property":"og:title","content":"私有云"}],["meta",{"property":"og:description","content":"私有云部署离不开Docker和nginx 以群晖为例: 域名无法访问私有云 Q：一切配置正常，解析正常，测试正常，但就是无法通过域名访问私有云? A：80和443端口不对个人开放，需要加上非80和443端口。 私有云动态IP问题 域名绑定的是静态IP，但是私有云是动态的，体现在重启光猫后IP地址变动。 在套件中心选择Docker安装 在注册表搜索che..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://nas.ilyl.life:8092/network/cloud1.png =420x200"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-21T02:38:55.000Z"}],["meta",{"property":"article:author","content":"乌龙茶"}],["meta",{"property":"article:tag","content":"网络"}],["meta",{"property":"article:published_time","content":"2023-06-17T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-21T02:38:55.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"私有云\\",\\"image\\":[\\"https://nas.ilyl.life:8092/network/cloud1.png =420x200\\",\\"https://nas.ilyl.life:8092/network/cloud2.png =420x200\\",\\"https://nas.ilyl.life:8092/network/cloud3.png =420x200\\",\\"https://nas.ilyl.life:8092/network/cloud4.png =420x200\\",\\"https://nas.ilyl.life:8092/network/cloud5.png =420x200\\",\\"https://nas.ilyl.life:8092/network/cloud6.png =420x200\\"],\\"datePublished\\":\\"2023-06-17T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-21T02:38:55.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"乌龙茶\\",\\"url\\":\\"https://ilyl.life\\",\\"email\\":\\"mailto:982474256@qq.com\\"}]}"]]},"headers":[{"level":2,"title":"域名无法访问私有云","slug":"域名无法访问私有云","link":"#域名无法访问私有云","children":[]},{"level":2,"title":"私有云动态IP问题","slug":"私有云动态ip问题","link":"#私有云动态ip问题","children":[]},{"level":2,"title":"私有云加域名和SSL","slug":"私有云加域名和ssl","link":"#私有云加域名和ssl","children":[{"level":3,"title":"NAS配置","slug":"nas配置","link":"#nas配置","children":[]},{"level":3,"title":"路由器配置","slug":"路由器配置","link":"#路由器配置","children":[]}]},{"level":2,"title":"不输入端口访问私有云","slug":"不输入端口访问私有云","link":"#不输入端口访问私有云","children":[]}],"git":{"createdTime":1686991976000,"updatedTime":1705804735000,"contributors":[{"name":"乌龙茶","email":"982474256@qq.com","commits":4}]},"readingTime":{"minutes":2.73,"words":819},"filePathRelative":"tools/nas/cloud.md","localizedDate":"2023年6月17日","excerpt":"<p>私有云部署离不开<a href=\\"https://www.docker.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Docker</a>和<a href=\\"https://nginx.org/en/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">nginx</a></p>\\n<p>以群晖为例:</p>\\n<h2>域名无法访问私有云</h2>\\n<p><code>Q</code>：一切配置正常，解析正常，测试正常，但就是无法通过域名访问私有云?</p>\\n<p><code>A</code>：<code>80</code>和<code>443</code>端口不对个人开放，需要加上非<code>80</code>和<code>443</code>端口。</p>","autoDesc":true}');export{H as comp,Z as data};
