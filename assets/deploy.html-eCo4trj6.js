import{_ as o}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as s,o as d,c as a,d as e,e as i,f as t,b as n}from"./app-FZi7yLPP.js";const c={},r=n('<h2 id="pc端iis部署" tabindex="-1"><a class="header-anchor" href="#pc端iis部署" aria-hidden="true">#</a> PC端IIS部署</h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>域名默认是80端口可以不输入，其他端口需要加上端口号</p><p>Https默认443端口可以不输入，其他端口需要加上端口号</p></div><h3 id="普通网站" tabindex="-1"><a class="header-anchor" href="#普通网站" aria-hidden="true">#</a> 普通网站</h3><ol><li><p>在<code>D</code>盘新建文件夹<code>test</code>，放入一张图片<code>1.jpg</code></p></li><li><p>打开IIS，选择网站右击，点击新建网站，网站名称随便输入,例如<code>test</code>，物理路径选择<code>D:\\test</code>，其他默认，确认后多出一个<code>test</code>的网站</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>Default Web Site</code>默认80端口，可以将相关资源放在该目录下，这里将其停止</p></div><figure><img src="https://nas.ilyl.life:8092/network/iis1.png" alt="新建网站" width="420" height="200" tabindex="0" loading="lazy"><figcaption>新建网站</figcaption></figure></li><li><p>右击<code>test</code>选择<code>管理网站</code>、选择<code>浏览</code>,浏览器出现<code>Web 服务器被配置为不列出此目录的内容。</code>，通过<code>目录浏览</code>启用它即可，这里不这么做，在浏览器地址之后输入<code>/1.jpg</code>，显示图片</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>出现问题不要慌，IIS默认为网站服务的,地址之后隐藏了一个首页地址<code>Index.html</code></p></div><figure><img src="https://nas.ilyl.life:8092/network/iis2.png" alt="新建网站" width="420" height="200" tabindex="0" loading="lazy"><figcaption>新建网站</figcaption></figure></li><li><p>防火墙出入站规则，添加当前网站的端口</p></li><li><p>在浏览器中将<code>localhost</code>替换成<code>域名</code>，回车确认</p></li></ol><h3 id="ssl加密" tabindex="-1"><a class="header-anchor" href="#ssl加密" aria-hidden="true">#</a> SSL加密</h3><p>申请过免费SSL证书通过之后，下载相应文件，选择IIS</p><ol><li><p>打开<code>IIS</code>，找到<code>服务器证书</code>，导入下载的SSL证书</p><figure><img src="https://nas.ilyl.life:8092/network/iis3.png" alt="服务器证书" width="420" height="200" tabindex="0" loading="lazy"><figcaption>服务器证书</figcaption></figure></li><li><p>选择部署的网站<code>test</code>，选择<code>编辑绑定</code>，看到类型http。新添加一个，选择类型https，下方SSL证书选择导入的<code>服务器证书</code></p><figure><img src="https://nas.ilyl.life:8092/network/iis4.png" alt="设置SSL" width="420" height="200" tabindex="0" loading="lazy"><figcaption>设置SSL</figcaption></figure></li><li><p>浏览器输入<code>https://localhost/1.jpg</code>，显示图片，但是提示不安全，将<code>localhost</code>替换成域名，一切完美</p></li></ol><h3 id="重定向" tabindex="-1"><a class="header-anchor" href="#重定向" aria-hidden="true">#</a> 重定向</h3><p>这里同时支持普通地址和Https认证</p><p>但是之后网站全部变成了Https，那么如何设置只输入域名而自动跳转到Https？</p><p>以IIS为例</p>',11),p={href:"https://learn.microsoft.com/en-us/iis/install/web-platform-installer/web-platform-installer-v4-command-line-webpicmdexe-rtw-release",target:"_blank",rel:"noopener noreferrer"},h=e("figure",null,[e("img",{src:"https://nas.ilyl.life:8092/network/iis5.png",alt:"Web平台组件",width:"420",height:"200",tabindex:"0",loading:"lazy"}),e("figcaption",null,"Web平台组件")],-1),g=e("code",null,"Web平台组件",-1),f={href:"https://www.iis.net/downloads/microsoft/url-rewrite",target:"_blank",rel:"noopener noreferrer"},u=e("figure",null,[e("img",{src:"https://nas.ilyl.life:8092/network/iis6.png",alt:"Url重定向",width:"420",height:"200",tabindex:"0",loading:"lazy"}),e("figcaption",null,"Url重定向")],-1),v=n('<li><p>配置Url重定向</p><figure><img src="https://nas.ilyl.life:8092/network/iis11.png" alt="Url重定向" width="420" height="200" tabindex="0" loading="lazy"><figcaption>Url重定向</figcaption></figure><ol><li><p>添加规则</p><figure><img src="https://nas.ilyl.life:8092/network/iis7.png" alt="添加规则" width="420" height="200" tabindex="0" loading="lazy"><figcaption>添加规则</figcaption></figure><figure><img src="https://nas.ilyl.life:8092/network/iis8.png" alt="空白规则" width="420" height="200" tabindex="0" loading="lazy"><figcaption>空白规则</figcaption></figure></li><li><p>名称：<code>https</code></p></li><li><p>匹配URL：模式(T)：<code>(.*)</code></p></li><li><p>条件：</p><p>条件输入(C)：<code>{HTTPS}</code></p><p>模式(T)：<code>^OFF$</code></p><p>其他默认</p><figure><img src="https://nas.ilyl.life:8092/network/iis9.png" alt="条件输入" width="420" height="200" tabindex="0" loading="lazy"><figcaption>条件输入</figcaption></figure></li><li><p>操作：</p><p>操作类型(Y)：<code>重定向</code></p><p>重定向URL：<code>https://{HTTP_HOST}/{R:1}</code></p><p>重定向URL：<code>已找到(302)</code></p><figure><img src="https://nas.ilyl.life:8092/network/iis10.png" alt="操作" width="420" height="200" tabindex="0" loading="lazy"><figcaption>操作</figcaption></figure></li></ol></li>',1),m=n('<h2 id="nas端docker部署" tabindex="-1"><a class="header-anchor" href="#nas端docker部署" aria-hidden="true">#</a> NAS端docker部署</h2><p>NAS里没有IIS，用的Window系统除外，在NAS里找到Docker，下载NGINX镜像。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>主要是关于<code>NGINX</code>的配置，可以现在桌面端或者是Docker里配置完成之后，在进入NAS里进行配置。</p></div><h3 id="docker部署普通网站" tabindex="-1"><a class="header-anchor" href="#docker部署普通网站" aria-hidden="true">#</a> Docker部署普通网站</h3><ol><li>添加容器选择<code>Nginx</code></li><li>将网站目录添加到对应<code>Nginx</code>配置目录</li><li>映射端口</li><li>配置NAS端口防火墙</li><li>配置光猫或者路由器转口转发</li></ol><h3 id="docker部署ssl网站" tabindex="-1"><a class="header-anchor" href="#docker部署ssl网站" aria-hidden="true">#</a> Docker部署SSL网站</h3>',6),b={href:"https://nginx.org/en/docs/http/ngx_http_ssl_module.html",target:"_blank",rel:"noopener noreferrer"},_=n(`<p>步骤同上<code>Docker部署普通网站</code>，额外调整<code>*.conf</code>配置文件。</p><p>本网站Docker示例：</p><div class="language-conf line-numbers-mode" data-ext="conf"><pre class="language-conf"><code>server {
    listen 443 ssl; 
    # 更改自己的域名
    server_name blog.ilyl.life;  
    ssl_certificate /usr/share/certs/blog.pem;
    ssl_certificate_key /usr/share/certs/blog.key;
    ssl_session_timeout 5m;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
    ssl_prefer_server_ciphers on;

    location / {
       root /usr/share/nginx/html;
       index index.html;
    }
}

server {
  listen 80;
  location /  {

    # Force HTTPS,更改自己的域名
    return 301 https://blog.ilyl.life:8088;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3);function S(x,k){const l=s("ExternalLinkIcon");return d(),a("div",null,[r,e("ol",null,[e("li",null,[e("p",null,[i("下载"),e("a",p,[i("Web平台组件"),t(l)])]),h]),e("li",null,[e("p",null,[i("在"),g,i("搜索"),e("a",f,[i("Url重定向"),t(l)]),i("并下载")]),u]),v]),m,e("p",null,[i("准备好证书文件，从哪里申请的就从哪里下载，关于"),e("a",b,[i("NGINX SSL配置"),t(l)]),i("。")]),_])}const I=o(c,[["render",S],["__file","deploy.html.vue"]]);export{I as default};
