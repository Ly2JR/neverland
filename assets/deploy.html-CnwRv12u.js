import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as s,o as a,c,d as e,f as i,a as l,e as t}from"./app-BuFzl1Pd.js";const d={},r=t('<h2 id="pc端iis部署" tabindex="-1"><a class="header-anchor" href="#pc端iis部署"><span>PC端IIS部署</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>域名默认是80端口可以不输入，其他端口需要加上端口号</p><p>Https默认443端口可以不输入，其他端口需要加上端口号</p></div><h3 id="普通网站" tabindex="-1"><a class="header-anchor" href="#普通网站"><span>普通网站</span></a></h3><ol><li><p>在<code>D</code>盘新建文件夹<code>test</code>，放入一张图片<code>1.jpg</code></p></li><li><p>打开IIS，选择网站右击，点击新建网站，网站名称随便输入,例如<code>test</code>，物理路径选择<code>D:\\test</code>，其他默认，确认后多出一个<code>test</code>的网站</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>Default Web Site</code>默认80端口，可以将相关资源放在该目录下，这里将其停止</p></div><figure><img src="https://nas.ilyl.life:8092/network/iis1.png" alt="新建网站" width="420" height="200" tabindex="0" loading="lazy"><figcaption>新建网站</figcaption></figure></li><li><p>右击<code>test</code>选择<code>管理网站</code>、选择<code>浏览</code>,浏览器出现<code>Web 服务器被配置为不列出此目录的内容。</code>，通过<code>目录浏览</code>启用它即可，这里不这么做，在浏览器地址之后输入<code>/1.jpg</code>，显示图片</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>出现问题不要慌，IIS默认为网站服务的,地址之后隐藏了一个首页地址<code>Index.html</code></p></div><figure><img src="https://nas.ilyl.life:8092/network/iis2.png" alt="新建网站" width="420" height="200" tabindex="0" loading="lazy"><figcaption>新建网站</figcaption></figure></li><li><p>防火墙出入站规则，添加当前网站的端口</p></li><li><p>在浏览器中将<code>localhost</code>替换成<code>域名</code>，回车确认</p></li></ol><h3 id="ssl加密" tabindex="-1"><a class="header-anchor" href="#ssl加密"><span>SSL加密</span></a></h3><p>申请过免费SSL证书通过之后，下载相应文件，选择IIS</p><ol><li><p>打开<code>IIS</code>，找到<code>服务器证书</code>，导入下载的SSL证书</p><figure><img src="https://nas.ilyl.life:8092/network/iis3.png" alt="服务器证书" width="420" height="200" tabindex="0" loading="lazy"><figcaption>服务器证书</figcaption></figure></li><li><p>选择部署的网站<code>test</code>，选择<code>编辑绑定</code>，看到类型http。新添加一个，选择类型https，下方SSL证书选择导入的<code>服务器证书</code></p><figure><img src="https://nas.ilyl.life:8092/network/iis4.png" alt="设置SSL" width="420" height="200" tabindex="0" loading="lazy"><figcaption>设置SSL</figcaption></figure></li><li><p>浏览器输入<code>https://localhost/1.jpg</code>，显示图片，但是提示不安全，将<code>localhost</code>替换成域名，一切完美</p></li></ol><h3 id="重定向" tabindex="-1"><a class="header-anchor" href="#重定向"><span>重定向</span></a></h3><p>这里同时支持普通地址和Https认证</p><p>但是之后网站全部变成了Https，那么如何设置只输入域名而自动跳转到Https？</p><p>以IIS为例</p>',11),p={href:"https://learn.microsoft.com/en-us/iis/install/web-platform-installer/web-platform-installer-v4-command-line-webpicmdexe-rtw-release",target:"_blank",rel:"noopener noreferrer"},h=e("figure",null,[e("img",{src:"https://nas.ilyl.life:8092/network/iis5.png",alt:"Web平台组件",width:"420",height:"200",tabindex:"0",loading:"lazy"}),e("figcaption",null,"Web平台组件")],-1),g=e("code",null,"Web平台组件",-1),f={href:"https://www.iis.net/downloads/microsoft/url-rewrite",target:"_blank",rel:"noopener noreferrer"},m=e("figure",null,[e("img",{src:"https://nas.ilyl.life:8092/network/iis6.png",alt:"Url重定向",width:"420",height:"200",tabindex:"0",loading:"lazy"}),e("figcaption",null,"Url重定向")],-1),u=t('<li><p>配置Url重定向</p><figure><img src="https://nas.ilyl.life:8092/network/iis11.png" alt="Url重定向" width="420" height="200" tabindex="0" loading="lazy"><figcaption>Url重定向</figcaption></figure><ol><li><p>添加规则</p><figure><img src="https://nas.ilyl.life:8092/network/iis7.png" alt="添加规则" width="420" height="200" tabindex="0" loading="lazy"><figcaption>添加规则</figcaption></figure><figure><img src="https://nas.ilyl.life:8092/network/iis8.png" alt="空白规则" width="420" height="200" tabindex="0" loading="lazy"><figcaption>空白规则</figcaption></figure></li><li><p>名称：<code>https</code></p></li><li><p>匹配URL：模式(T)：<code>(.*)</code></p></li><li><p>条件：</p><p>条件输入(C)：<code>{HTTPS}</code></p><p>模式(T)：<code>^OFF$</code></p><p>其他默认</p><figure><img src="https://nas.ilyl.life:8092/network/iis9.png" alt="条件输入" width="420" height="200" tabindex="0" loading="lazy"><figcaption>条件输入</figcaption></figure></li><li><p>操作：</p><p>操作类型(Y)：<code>重定向</code></p><p>重定向URL：<code>https://{HTTP_HOST}/{R:1}</code></p><p>重定向URL：<code>已找到(302)</code></p><figure><img src="https://nas.ilyl.life:8092/network/iis10.png" alt="操作" width="420" height="200" tabindex="0" loading="lazy"><figcaption>操作</figcaption></figure></li></ol></li>',1),v=t('<h2 id="nas端docker部署" tabindex="-1"><a class="header-anchor" href="#nas端docker部署"><span>NAS端docker部署</span></a></h2><p>NAS里没有IIS，用的Window系统除外，在NAS里找到Docker，下载NGINX镜像。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>主要是关于<code>NGINX</code>的配置，可以现在桌面端或者是Docker里配置完成之后，在进入NAS里进行配置。</p></div><h3 id="docker部署普通网站" tabindex="-1"><a class="header-anchor" href="#docker部署普通网站"><span>Docker部署普通网站</span></a></h3><ol><li>添加容器选择<code>Nginx</code></li><li>将网站目录添加到对应<code>Nginx</code>配置目录</li><li>映射端口</li><li>配置NAS端口防火墙</li><li>配置光猫或者路由器转口转发</li></ol><h3 id="docker部署ssl网站" tabindex="-1"><a class="header-anchor" href="#docker部署ssl网站"><span>Docker部署SSL网站</span></a></h3>',6),b={href:"https://nginx.org/en/docs/http/ngx_http_ssl_module.html",target:"_blank",rel:"noopener noreferrer"},y=t(`<p>步骤同上<code>Docker部署普通网站</code>，额外调整<code>*.conf</code>配置文件。</p><p>本网站Docker示例：</p><div class="language-conf line-numbers-mode" data-ext="conf" data-title="conf"><pre class="language-conf"><code>server {
    listen 443 ssl; 
    # 更改自己的域名
    server_name blog.ilyl.life;  
    ssl_certificate /usr/share/certs/blog.pem;
    ssl_certificate_key /usr/share/certs/blog.key;
    ssl_session_timeout 5m;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
    ssl_prefer_server_ciphers on;

    location / {
       root /usr/share/nginx/html;
       index index.html;
    }
}

server {
  listen 80;
  location /  {

    # Force HTTPS,更改自己的域名
    return 301 https://blog.ilyl.life:8088;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3);function k(_,S){const n=s("ExternalLinkIcon");return a(),c("div",null,[r,e("ol",null,[e("li",null,[e("p",null,[i("下载"),e("a",p,[i("Web平台组件"),l(n)])]),h]),e("li",null,[e("p",null,[i("在"),g,i("搜索"),e("a",f,[i("Url重定向"),l(n)]),i("并下载")]),m]),u]),v,e("p",null,[i("准备好证书文件，从哪里申请的就从哪里下载，关于"),e("a",b,[i("NGINX SSL配置"),l(n)]),i("。")]),y])}const I=o(d,[["render",k],["__file","deploy.html.vue"]]),D=JSON.parse('{"path":"/tools/nas/deploy.html","title":"部署","lang":"zh-CN","frontmatter":{"title":"部署","date":"2023-06-17T00:00:00.000Z","dir.order":6,"order":6,"isOriginal":true,"category":["工具箱"],"tag":["部署"],"editLink":false,"footer":false,"copy":true,"description":"PC端IIS部署 提示 域名默认是80端口可以不输入，其他端口需要加上端口号 Https默认443端口可以不输入，其他端口需要加上端口号 普通网站 在D盘新建文件夹test，放入一张图片1.jpg 打开IIS，选择网站右击，点击新建网站，网站名称随便输入,例如test，物理路径选择D:\\\\test，其他默认，确认后多出一个test的网站 提示 Defau...","head":[["meta",{"property":"og:url","content":"https://ilyl.life/tools/nas/deploy.html"}],["meta",{"property":"og:site_name","content":"乌龙茶有点甜"}],["meta",{"property":"og:title","content":"部署"}],["meta",{"property":"og:description","content":"PC端IIS部署 提示 域名默认是80端口可以不输入，其他端口需要加上端口号 Https默认443端口可以不输入，其他端口需要加上端口号 普通网站 在D盘新建文件夹test，放入一张图片1.jpg 打开IIS，选择网站右击，点击新建网站，网站名称随便输入,例如test，物理路径选择D:\\\\test，其他默认，确认后多出一个test的网站 提示 Defau..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://nas.ilyl.life:8092/network/iis1.png =420x200"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-29T03:33:50.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"部署"}],["meta",{"property":"article:author","content":"乌龙茶"}],["meta",{"property":"article:tag","content":"部署"}],["meta",{"property":"article:published_time","content":"2023-06-17T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-08-29T03:33:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"部署\\",\\"image\\":[\\"https://nas.ilyl.life:8092/network/iis1.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis2.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis3.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis4.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis5.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis6.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis11.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis7.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis8.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis9.png =420x200\\",\\"https://nas.ilyl.life:8092/network/iis10.png =420x200\\"],\\"datePublished\\":\\"2023-06-17T00:00:00.000Z\\",\\"dateModified\\":\\"2023-08-29T03:33:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"乌龙茶\\",\\"url\\":\\"https://ilyl.life\\",\\"email\\":\\"mailto:982474256@qq.com\\"}]}"]]},"headers":[{"level":2,"title":"PC端IIS部署","slug":"pc端iis部署","link":"#pc端iis部署","children":[{"level":3,"title":"普通网站","slug":"普通网站","link":"#普通网站","children":[]},{"level":3,"title":"SSL加密","slug":"ssl加密","link":"#ssl加密","children":[]},{"level":3,"title":"重定向","slug":"重定向","link":"#重定向","children":[]}]},{"level":2,"title":"NAS端docker部署","slug":"nas端docker部署","link":"#nas端docker部署","children":[{"level":3,"title":"Docker部署普通网站","slug":"docker部署普通网站","link":"#docker部署普通网站","children":[]},{"level":3,"title":"Docker部署SSL网站","slug":"docker部署ssl网站","link":"#docker部署ssl网站","children":[]}]}],"git":{"createdTime":1686991976000,"updatedTime":1693280030000,"contributors":[{"name":"乌龙茶","email":"982474256@qq.com","commits":6}]},"readingTime":{"minutes":3.07,"words":922},"filePathRelative":"tools/nas/deploy.md","localizedDate":"2023年6月17日","excerpt":"<h2>PC端IIS部署</h2>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>域名默认是80端口可以不输入，其他端口需要加上端口号</p>\\n<p>Https默认443端口可以不输入，其他端口需要加上端口号</p>\\n</div>\\n<h3>普通网站</h3>\\n<ol>\\n<li>\\n<p>在<code>D</code>盘新建文件夹<code>test</code>，放入一张图片<code>1.jpg</code></p>\\n</li>\\n<li>\\n<p>打开IIS，选择网站右击，点击新建网站，网站名称随便输入,例如<code>test</code>，物理路径选择<code>D:\\\\test</code>，其他默认，确认后多出一个<code>test</code>的网站</p>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p><code>Default Web Site</code>默认80端口，可以将相关资源放在该目录下，这里将其停止</p>\\n</div>\\n<figure><img src=\\"https://nas.ilyl.life:8092/network/iis1.png\\" alt=\\"新建网站\\" width=\\"420\\" height=\\"200\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>新建网站</figcaption></figure>\\n</li>\\n<li>\\n<p>右击<code>test</code>选择<code>管理网站</code>、选择<code>浏览</code>,浏览器出现<code>Web 服务器被配置为不列出此目录的内容。</code>，通过<code>目录浏览</code>启用它即可，这里不这么做，在浏览器地址之后输入<code>/1.jpg</code>，显示图片</p>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>出现问题不要慌，IIS默认为网站服务的,地址之后隐藏了一个首页地址<code>Index.html</code></p>\\n</div>\\n<figure><img src=\\"https://nas.ilyl.life:8092/network/iis2.png\\" alt=\\"新建网站\\" width=\\"420\\" height=\\"200\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>新建网站</figcaption></figure>\\n</li>\\n<li>\\n<p>防火墙出入站规则，添加当前网站的端口</p>\\n</li>\\n<li>\\n<p>在浏览器中将<code>localhost</code>替换成<code>域名</code>，回车确认</p>\\n</li>\\n</ol>","autoDesc":true}');export{I as comp,D as data};
