<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.9" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.32" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://ilyl.life/tools/databases/mysql.html"><meta property="og:site_name" content="乌龙茶有点甜"><meta property="og:title" content="MYSQL"><meta property="og:description" content="表 索引 创建组合索引 在创建表的时候创建索引 修改表的时候添加索引 查看索引 删除索引 数据 删除数据 更新数据 查询 查询表使用列别名 case when then 计算列 交叉连接 笛卡儿积 cross join 内连接 inner join 左外连接 left join 右外连接 right join Where 过滤 between and ..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-19T03:34:16.000Z"><meta property="article:author" content="乌龙茶"><meta property="article:tag" content="MYSQL"><meta property="article:published_time" content="2023-06-19T00:00:00.000Z"><meta property="article:modified_time" content="2023-08-19T03:34:16.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MYSQL","image":[""],"datePublished":"2023-06-19T00:00:00.000Z","dateModified":"2023-08-19T03:34:16.000Z","author":[{"@type":"Person","name":"乌龙茶","url":"https://ilyl.life","email":"mailto:982474256@qq.com"}]}</script><script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e0f4e638f3c9bb2b41419a3b473edbc4";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/chrome-64.png" type="image/png" sizes="64x64"><link rel="icon" href="/assets/icon/chrome-128.png" type="image/png" sizes="128x128"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>MYSQL | 乌龙茶有点甜</title><meta name="description" content="表 索引 创建组合索引 在创建表的时候创建索引 修改表的时候添加索引 查看索引 删除索引 数据 删除数据 更新数据 查询 查询表使用列别名 case when then 计算列 交叉连接 笛卡儿积 cross join 内连接 inner join 左外连接 left join 右外连接 right join Where 过滤 between and ...">
    <link rel="preload" href="/assets/style-CUrV3XiK.css" as="style"><link rel="stylesheet" href="/assets/style-CUrV3XiK.css">
    <link rel="modulepreload" href="/assets/app-Ks4gHtJg.js"><link rel="modulepreload" href="/assets/mysql.html-WzwutnK_.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">乌龙茶有点甜</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="主页"><img class="icon" src="/assets/svg/home.svg" alt aria-hidden no-view style="">主页<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="梦幻岛"><span class="title"><img class="icon" src="/assets/svg/island2.svg" alt aria-hidden no-view style="">梦幻岛</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="https://nas.ilyl.life:8091/" rel="noopener noreferrer" target="_blank" aria-label="影院" class="nav-link"><img class="icon" src="/assets/svg/movie.svg" alt aria-hidden no-view style="">影院<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://nas.ilyl.life:8089/audio" rel="noopener noreferrer" target="_blank" aria-label="音乐" class="nav-link"><img class="icon" src="/assets/svg/music.svg" alt aria-hidden no-view style="">音乐<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://nas.ilyl.life:8089/file" rel="noopener noreferrer" target="_blank" aria-label="网盘" class="nav-link"><img class="icon" src="/assets/svg/hard-drive.svg" alt aria-hidden no-view style="">网盘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li><li class="dropdown-item"><a href="https://nas.ilyl.life:8092/default.png" rel="noopener noreferrer" target="_blank" aria-label="图床" class="nav-link"><img class="icon" src="/assets/svg/camera.svg" alt aria-hidden no-view style="">图床<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="博文"><span class="title"><img class="icon" src="/assets/svg/toolbox3.svg" alt aria-hidden no-view style="">博文</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/cs/" aria-label="桌面端"><img class="icon" src="/assets/svg/computer.svg" alt aria-hidden no-view style="">桌面端<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/web/" aria-label="Web端"><img class="icon" src="/assets/svg/edge.svg" alt aria-hidden no-view style="">Web端<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/tools/regular-expressions.html" aria-label="工具箱"><img class="icon" src="/assets/svg/toolbox2.svg" alt aria-hidden no-view style="">工具箱<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/about/" aria-label="关于"><img class="icon" src="/assets/svg/me.svg" alt aria-hidden no-view style="">关于<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/ly2jr/neverland" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable"><img class="icon" src="/assets/svg/island.svg" alt aria-hidden no-view style=""><a class="route-link nav-link vp-sidebar-title" href="/hope/" aria-label="梦幻岛"><!---->梦幻岛<!----></a><!----></p><ul class="vp-sidebar-links"></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/computer.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">桌面端</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/edge.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">Web端</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="icon" src="/assets/svg/toolbox.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">工具箱</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/tools/regular-expressions.html" aria-label="正则表达式"><img class="icon" src="/assets/svg/regular-expression.svg" alt aria-hidden no-view style="">正则表达式<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/csharp.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">C#</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/docker2.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/ts.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">TypeScript</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/ffmpeg.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">FFMPEG</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/excel.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">Excel</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/vmware.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">虚拟机</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="icon" src="/assets/svg/database.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">数据库</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/tools/databases/" aria-label="概述"><!---->概述<!----></a></li><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/tools/databases/mysql.html" aria-label="MYSQL"><!---->MYSQL<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/tools/databases/mariadb.html" aria-label="Mariadb"><!---->Mariadb<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SQL Server</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/tools/databases/paramaters.html" aria-label="参数化查询"><!---->参数化查询<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">科大讯飞</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">安装包</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/yonyou.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">用友U8+</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/assets/svg/nas.svg" alt aria-hidden no-view style=""><span class="vp-sidebar-title">私有云</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->MYSQL</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://ilyl.life" target="_blank" rel="noopener noreferrer">乌龙茶</a></span><span property="author" content="乌龙茶"></span></span><span class="nl-original-wrap nl-original" data-theme="light">原创</span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-06-19T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 9 分钟</span><meta property="timeRequired" content="PT9M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category2 clickable" role="navigation">工具箱</span><!--]--><meta property="articleSection" content="工具箱"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag5 clickable" role="navigation">MYSQL</span><!--]--><meta property="keywords" content="MYSQL"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#表">表</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#索引">索引</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#创建组合索引">创建组合索引</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#在创建表的时候创建索引">在创建表的时候创建索引</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#修改表的时候添加索引">修改表的时候添加索引</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#查看索引">查看索引</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#删除索引">删除索引</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#数据">数据</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#删除数据">删除数据</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#更新数据">更新数据</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#查询">查询</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#查询表使用列别名">查询表使用列别名</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#case-when-then">case when then</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#计算列">计算列</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#交叉连接-笛卡儿积-cross-join">交叉连接 笛卡儿积 cross join</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#内连接-inner-join">内连接 inner join</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#左外连接-left-join">左外连接 left join</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#右外连接-right-join">右外连接 right join</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#where-过滤">Where 过滤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#between-and">between and</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#in">in</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#is-null">is null</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#子查询-in">子查询 in</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#group-by">group by</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#having">having</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#order-by">order by</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#limit">limit</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#视图">视图</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#删除视图">删除视图</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#修改视图">修改视图</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#查看视图定义">查看视图定义</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#更新视图">更新视图</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#存储过程">存储过程</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#创建存储过程">创建存储过程</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#声明变量">声明变量</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#变量赋值">变量赋值</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#流程控制语句">流程控制语句</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#循环语句">循环语句</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#游标">游标</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#删除存储过程">删除存储过程</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#存储函数">存储函数</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#调用存储函数">调用存储函数</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#删除存储函数">删除存储函数</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#触发器">触发器</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#创建触发器">创建触发器</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#删除触发器">删除触发器</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#用户">用户</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#查看用户">查看用户</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#添加用户">添加用户</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#删除用户">删除用户</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#修改用户">修改用户</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#修改用户口令">修改用户口令</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#查看用户权限">查看用户权限</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分配权限">分配权限</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分配用户及权限-已过时-用户和权限分开不在合并一起">分配用户及权限(已过时),用户和权限分开不在合并一起</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分配用户执行所有数据库操作">分配用户执行所有数据库操作</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#分配用户创建用户权限">分配用户创建用户权限</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#授予表权限时-语法项-priv-type-可以指定维以下值">授予表权限时,语法项“priv_type” 可以指定维以下值</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#对用户授权并且可以将自身的权限授予其他用户">对用户授权并且可以将自身的权限授予其他用户</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#权限撤销">权限撤销</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#撤销select权限">撤销SELECT权限</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#备份">备份</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#恢复">恢复</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#示例">示例</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h2 id="表" tabindex="-1"><a class="header-anchor" href="#表"><span>表</span></a></h2><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> tb_student
<span class="token punctuation">(</span>
    studentNo <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    studentName <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    studentSex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    studentAge <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    classNo <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> tb_score
<span class="token punctuation">(</span>
    studentNo <span class="token keyword">int</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    className <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    score <span class="token keyword">int</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="索引" tabindex="-1"><a class="header-anchor" href="#索引"><span>索引</span></a></h2><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_customers
<span class="token keyword">ON</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">(</span>cust_name<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">asc</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建组合索引" tabindex="-1"><a class="header-anchor" href="#创建组合索引"><span>创建组合索引</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">index</span> index_cust
<span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">(</span>cust_id<span class="token punctuation">,</span>cust_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="在创建表的时候创建索引" tabindex="-1"><a class="header-anchor" href="#在创建表的时候创建索引"><span>在创建表的时候创建索引</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> seller
<span class="token punctuation">(</span>
    seller_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    seller_name <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    seller_address <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    seller_contact <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    product_type <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    sales <span class="token keyword">int</span>  <span class="token boolean">null</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>seller_id<span class="token punctuation">,</span>product_type<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">index</span> index_selller<span class="token punctuation">(</span>sales<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改表的时候添加索引" tabindex="-1"><a class="header-anchor" href="#修改表的时候添加索引"><span>修改表的时候添加索引</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> mysql_test<span class="token punctuation">.</span>customers
<span class="token keyword">add</span> <span class="token keyword">index</span> index_seller_name<span class="token punctuation">(</span>seller_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看索引" tabindex="-1"><a class="header-anchor" href="#查看索引"><span>查看索引</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="删除索引" tabindex="-1"><a class="header-anchor" href="#删除索引"><span>删除索引</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">index</span> index_cust <span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>customers
<span class="token keyword">alter</span> <span class="token keyword">table</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">drop</span> <span class="token keyword">index</span> index_customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据" tabindex="-1"><a class="header-anchor" href="#数据"><span>数据</span></a></h2><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">901</span><span class="token punctuation">,</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;F&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;北京市&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;朝阳区&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&#39;李四&#39;</span><span class="token punctuation">,</span><span class="token keyword">default</span><span class="token punctuation">,</span><span class="token string">&#39;武汉市&#39;</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">(</span>cust_id<span class="token punctuation">,</span>cust_name<span class="token punctuation">,</span>cust_sex<span class="token punctuation">,</span>cust_address<span class="token punctuation">,</span>cust_contact<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&#39;李四&#39;</span><span class="token punctuation">,</span><span class="token keyword">default</span><span class="token punctuation">,</span><span class="token string">&#39;武汉市&#39;</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">set</span> cust_name<span class="token operator">=</span><span class="token string">&#39;李四&#39;</span><span class="token punctuation">,</span>cust_address<span class="token operator">=</span><span class="token string">&#39;武汉市&#39;</span><span class="token punctuation">,</span>cust_sex<span class="token operator">=</span><span class="token keyword">default</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除数据" tabindex="-1"><a class="header-anchor" href="#删除数据"><span>删除数据</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_name<span class="token operator">=</span><span class="token string">&#39;王五&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="更新数据" tabindex="-1"><a class="header-anchor" href="#更新数据"><span>更新数据</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">update</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">set</span> cust_address<span class="token operator">=</span><span class="token string">&#39;武汉市&#39;</span> <span class="token keyword">where</span> cust_name<span class="token operator">=</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="查询" tabindex="-1"><a class="header-anchor" href="#查询"><span>查询</span></a></h2><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span>cust_sex<span class="token punctuation">,</span>cust_address <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询表使用列别名" tabindex="-1"><a class="header-anchor" href="#查询表使用列别名"><span>查询表使用列别名</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> cust_name <span class="token punctuation">,</span>cust_address <span class="token keyword">as</span> 地址 <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="case-when-then" tabindex="-1"><a class="header-anchor" href="#case-when-then"><span>case when then</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span><span class="token keyword">case</span> <span class="token keyword">when</span> cust_sex<span class="token operator">=</span><span class="token string">&#39;M&#39;</span> <span class="token keyword">then</span> <span class="token string">&#39;男&#39;</span> <span class="token keyword">else</span> <span class="token string">&#39;女&#39;</span> <span class="token keyword">end</span> <span class="token keyword">as</span> 性别 <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="计算列" tabindex="-1"><a class="header-anchor" href="#计算列"><span>计算列</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span>cust_sex<span class="token punctuation">,</span>cust_id <span class="token operator">+</span><span class="token number">100</span> <span class="token keyword">as</span> id <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="交叉连接-笛卡儿积-cross-join" tabindex="-1"><a class="header-anchor" href="#交叉连接-笛卡儿积-cross-join"><span>交叉连接 笛卡儿积 cross join</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">cross</span> <span class="token keyword">join</span> mysql_test<span class="token punctuation">.</span>seller<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">,</span>mysql_test<span class="token punctuation">.</span>seller<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="内连接-inner-join" tabindex="-1"><a class="header-anchor" href="#内连接-inner-join"><span>内连接 inner join</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>tb_student <span class="token keyword">inner</span> <span class="token keyword">join</span> mysql_test<span class="token punctuation">.</span>tb_score <span class="token keyword">on</span> tb_student<span class="token punctuation">.</span>studentNo<span class="token operator">=</span>tb_score<span class="token punctuation">.</span>studentNo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="左外连接-left-join" tabindex="-1"><a class="header-anchor" href="#左外连接-left-join"><span>左外连接 left join</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>tb_student <span class="token keyword">left</span> <span class="token keyword">join</span> mysql_test<span class="token punctuation">.</span>tb_score <span class="token keyword">on</span> tb_student<span class="token punctuation">.</span>studentNo<span class="token operator">=</span>tb_score<span class="token punctuation">.</span>studentNo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="右外连接-right-join" tabindex="-1"><a class="header-anchor" href="#右外连接-right-join"><span>右外连接 right join</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>tb_student <span class="token keyword">right</span> <span class="token keyword">join</span> mysql_test<span class="token punctuation">.</span>tb_score <span class="token keyword">on</span> tb_student<span class="token punctuation">.</span>studentNo<span class="token operator">=</span>tb_score<span class="token punctuation">.</span>studentNo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="where-过滤" tabindex="-1"><a class="header-anchor" href="#where-过滤"><span>Where 过滤</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_sex<span class="token operator">=</span><span class="token string">&#39;M&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="between-and" tabindex="-1"><a class="header-anchor" href="#between-and"><span>between and</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_id <span class="token operator">BETWEEN</span> <span class="token number">903</span> <span class="token operator">and</span> <span class="token number">912</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="in" tabindex="-1"><a class="header-anchor" href="#in"><span>in</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">903</span><span class="token punctuation">,</span><span class="token number">906</span><span class="token punctuation">,</span><span class="token number">908</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="is-null" tabindex="-1"><a class="header-anchor" href="#is-null"><span>is null</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_contact <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="子查询-in" tabindex="-1"><a class="header-anchor" href="#子查询-in"><span>子查询 in</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> studentNo<span class="token punctuation">,</span>studentName <span class="token keyword">from</span> tb_student <span class="token keyword">where</span> studentNo <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> studentNo <span class="token keyword">from</span> tb_score <span class="token keyword">where</span> score <span class="token operator">&gt;</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="group-by" tabindex="-1"><a class="header-anchor" href="#group-by"><span>group by</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> cust_address<span class="token punctuation">,</span>cust_sex<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;人数&#39;</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">group</span> <span class="token keyword">by</span> cust_address<span class="token punctuation">,</span>cust_sex<span class="token punctuation">;</span>
<span class="token keyword">select</span> cust_address<span class="token punctuation">,</span>cust_sex<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&#39;人数&#39;</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">group</span> <span class="token keyword">by</span> cust_address<span class="token punctuation">,</span>cust_sex <span class="token keyword">with rollup</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="having" tabindex="-1"><a class="header-anchor" href="#having"><span>having</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> cust_address<span class="token punctuation">,</span>cust_name<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> num <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">group</span> <span class="token keyword">by</span> cust_address<span class="token punctuation">,</span>cust_name <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="order-by" tabindex="-1"><a class="header-anchor" href="#order-by"><span>order by</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span>cust_sex <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">order</span> <span class="token keyword">by</span> cust_name <span class="token keyword">desc</span><span class="token punctuation">,</span>cust_address <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="limit" tabindex="-1"><a class="header-anchor" href="#limit"><span>limit</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span>  <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">order</span> <span class="token keyword">by</span> cust_id <span class="token keyword">limit</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">order</span> <span class="token keyword">by</span> cust_id <span class="token keyword">limit</span> <span class="token number">1</span> <span class="token keyword">offset</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="视图" tabindex="-1"><a class="header-anchor" href="#视图"><span>视图</span></a></h2><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">view</span> mysql_test<span class="token punctuation">.</span>customers_view
<span class="token keyword">as</span> 
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_sex<span class="token operator">=</span><span class="token string">&#39;M&#39;</span> <span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除视图" tabindex="-1"><a class="header-anchor" href="#删除视图"><span>删除视图</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">view</span>  <span class="token keyword">if</span> <span class="token keyword">exists</span> mysql_test<span class="token punctuation">.</span>customers_view<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="修改视图" tabindex="-1"><a class="header-anchor" href="#修改视图"><span>修改视图</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code> <span class="token keyword">alter</span> <span class="token keyword">view</span> mysql_test<span class="token punctuation">.</span>customers_view
 <span class="token keyword">as</span> 
    <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_sex<span class="token operator">=</span><span class="token string">&#39;F&#39;</span> <span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看视图定义" tabindex="-1"><a class="header-anchor" href="#查看视图定义"><span>查看视图定义</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">view</span> mysql_test<span class="token punctuation">.</span>customers_view
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="更新视图" tabindex="-1"><a class="header-anchor" href="#更新视图"><span>更新视图</span></a></h3><ul><li>对where 条件成立并且只有一个基本表</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> mysql_test<span class="token punctuation">.</span>customers_view <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">909</span><span class="token punctuation">,</span><span class="token string">&#39;周明&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;F&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;武汉市&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;洪山区&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>修改视图 只改变一个基本表</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">update</span> mysql_test<span class="token punctuation">.</span>customers_view <span class="token keyword">set</span> cust_address<span class="token operator">=</span><span class="token string">&#39;上海市&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>删除视图 只能有一个基本表</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers_view <span class="token keyword">where</span> cust_name<span class="token operator">=</span><span class="token string">&#39;周明&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>查询视图</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span>cust_address <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers_view <span class="token keyword">where</span> cust_id <span class="token operator">=</span><span class="token number">905</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="存储过程" tabindex="-1"><a class="header-anchor" href="#存储过程"><span>存储过程</span></a></h2><h3 id="创建存储过程" tabindex="-1"><a class="header-anchor" href="#创建存储过程"><span>创建存储过程</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $$
<span class="token keyword">create</span> <span class="token keyword">procedure</span> sp_update_sex<span class="token punctuation">(</span><span class="token operator">in</span> cid <span class="token keyword">int</span><span class="token punctuation">,</span><span class="token operator">in</span> ces <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">update</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">set</span> cust_sex<span class="token operator">=</span>ces <span class="token keyword">where</span> cust_id<span class="token operator">=</span>cid<span class="token punctuation">;</span>
<span class="token keyword">end</span> $$
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="声明变量" tabindex="-1"><a class="header-anchor" href="#声明变量"><span>声明变量</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">declare</span> cid <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="变量赋值" tabindex="-1"><a class="header-anchor" href="#变量赋值"><span>变量赋值</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">set</span> cid<span class="token operator">=</span><span class="token number">910</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="流程控制语句" tabindex="-1"><a class="header-anchor" href="#流程控制语句"><span>流程控制语句</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">if</span> <span class="token keyword">then</span> <span class="token keyword">else</span> 
<span class="token keyword">case</span>     
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="循环语句" tabindex="-1"><a class="header-anchor" href="#循环语句"><span>循环语句</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">while</span> <span class="token keyword">repeat</span> <span class="token keyword">loop</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>iterate 用在 while loop repeat 退出当前循环</p><h3 id="游标" tabindex="-1"><a class="header-anchor" href="#游标"><span>游标</span></a></h3><p>声明游标 declare cursor_name cursour for select_statement 打开游标 open cursor_name 读取数据 fetch cursor_name into var_name[,var_name].... 关闭游标 close cursor_name</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $$
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_sumofrow<span class="token punctuation">(</span><span class="token keyword">OUT</span> R <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> cid <span class="token keyword">int</span><span class="token punctuation">;</span>
 <span class="token keyword">declare</span> found <span class="token keyword">BOOLEAN</span>  <span class="token keyword">default</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">declare</span> cur_cid <span class="token keyword">cursor</span> <span class="token keyword">for</span> <span class="token keyword">select</span> cust_id <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">;</span>
    <span class="token keyword">declare</span> <span class="token keyword">continue</span> <span class="token keyword">handler</span> <span class="token keyword">for</span> <span class="token operator">not</span> found <span class="token keyword">set</span> found<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">set</span> R<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">open</span> cur_cid<span class="token punctuation">;</span>
    <span class="token keyword">fetch</span> cur_cid <span class="token keyword">into</span> cid<span class="token punctuation">;</span>
    <span class="token keyword">while</span> found <span class="token keyword">do</span>
        <span class="token keyword">set</span> R<span class="token operator">=</span>R<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">fetch</span> cur_cid <span class="token keyword">into</span> cid<span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span>
    <span class="token keyword">close</span> cur_cid<span class="token punctuation">;</span>
<span class="token keyword">end</span> $$
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token keyword">call</span> sp_sumofrow<span class="token punctuation">(</span><span class="token variable">@rows</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@rows</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> sp_update_sex<span class="token punctuation">(</span><span class="token number">904</span><span class="token punctuation">,</span><span class="token string">&#39;M&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除存储过程" tabindex="-1"><a class="header-anchor" href="#删除存储过程"><span>删除存储过程</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">procedure</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> sp_update_sex<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="存储函数" tabindex="-1"><a class="header-anchor" href="#存储函数"><span>存储函数</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $$
<span class="token keyword">create</span> <span class="token keyword">function</span> fn_search<span class="token punctuation">(</span>cid <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">returns</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">DETERMINISTIC</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">select</span> cust_sex <span class="token keyword">into</span> sex <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_id<span class="token operator">=</span>cid<span class="token punctuation">;</span>
    <span class="token keyword">if</span> sex <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token keyword">then</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token string">&#39;没有该客户&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> sex<span class="token operator">=</span><span class="token string">&#39;F&#39;</span> <span class="token keyword">then</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token string">&#39;女&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token string">&#39;男&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> $$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用存储函数" tabindex="-1"><a class="header-anchor" href="#调用存储函数"><span>调用存储函数</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> fn_search<span class="token punctuation">(</span><span class="token number">904</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="删除存储函数" tabindex="-1"><a class="header-anchor" href="#删除存储函数"><span>删除存储函数</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">function</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> fn_search<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="触发器" tabindex="-1"><a class="header-anchor" href="#触发器"><span>触发器</span></a></h2><p>数据模拟脚本</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $$
<span class="token keyword">create</span> <span class="token keyword">procedure</span> sp_update_content<span class="token punctuation">(</span><span class="token operator">in</span> uname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">in</span> newemial <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">update</span> db_test<span class="token punctuation">.</span>content <span class="token keyword">set</span> email<span class="token operator">=</span>newemial <span class="token keyword">where</span> username<span class="token operator">=</span>uname<span class="token punctuation">;</span>
<span class="token keyword">end</span> $$

<span class="token keyword">call</span> sp_update_content<span class="token punctuation">(</span><span class="token string">&#39;MySQL初学者&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;982474256@qq.com&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> db_test<span class="token punctuation">.</span>content<span class="token punctuation">;</span>

<span class="token keyword">use</span> mysql_test<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> irders
<span class="token punctuation">(</span>
    order_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    order_prodcut <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    order_product_type <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    cust_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    order_date <span class="token keyword">datetime</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    order_price <span class="token keyword">double</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    order_amount <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>order_id<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cust_id<span class="token punctuation">)</span>
        <span class="token keyword">references</span> customers<span class="token punctuation">(</span>cust_id<span class="token punctuation">)</span>
        <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">restrict</span>
        <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">restrict</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建触发器" tabindex="-1"><a class="header-anchor" href="#创建触发器"><span>创建触发器</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">use</span> mysql_test<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">trigger</span> mysql_test<span class="token punctuation">.</span>customers_insert_trigger <span class="token keyword">after</span> <span class="token keyword">insert</span>
<span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">for each row</span> <span class="token keyword">set</span> <span class="token variable">@str</span><span class="token operator">=</span><span class="token string">&#39;one customers added!&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">&#39;万华&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;F&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;长沙市&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;芙蓉区&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@str</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除触发器" tabindex="-1"><a class="header-anchor" href="#删除触发器"><span>删除触发器</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">trigger</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> mysql_test<span class="token punctuation">.</span>customers_insert_trigger<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建触发器 insert 用new 虚拟表,delete 用OLD 虚拟表，UPDATE 用OLD虚拟表之前的数据，NEW 虚拟表更新的值</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">trigger</span> mysql_test<span class="token punctuation">.</span>customers_insert_trigger <span class="token keyword">after</span> <span class="token keyword">insert</span> 
<span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">for each row</span> <span class="token keyword">set</span> <span class="token variable">@str</span><span class="token operator">=</span>new<span class="token punctuation">.</span>cust_id<span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">&#39;曾伟&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;F&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;长沙&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;芙蓉区&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@str</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">trigger</span> mysql_test<span class="token punctuation">.</span>customers_update_trigger before <span class="token keyword">update</span> <span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">for each row</span>
<span class="token keyword">set</span> new<span class="token punctuation">.</span>cust_address<span class="token operator">=</span>old<span class="token punctuation">.</span>cust_contact<span class="token punctuation">;</span>

<span class="token keyword">update</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">set</span> cust_address<span class="token operator">=</span><span class="token string">&#39;武汉市&#39;</span> <span class="token keyword">where</span> cust_name<span class="token operator">=</span><span class="token string">&#39;曾伟&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> cust_name<span class="token operator">=</span><span class="token string">&#39;曾伟&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="用户" tabindex="-1"><a class="header-anchor" href="#用户"><span>用户</span></a></h2><h3 id="查看用户" tabindex="-1"><a class="header-anchor" href="#查看用户"><span>查看用户</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token punctuation">;</span>

<span class="token keyword">select</span> password<span class="token punctuation">(</span>str<span class="token punctuation">)</span> 已过时
<span class="token keyword">select</span>  md5<span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="添加用户" tabindex="-1"><a class="header-anchor" href="#添加用户"><span>添加用户</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">&#39;zhangsan&#39;</span><span class="token variable">@&#39;localhost&#39;</span> identified <span class="token keyword">by</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">,</span>
                        <span class="token string">&#39;lisi&#39;</span><span class="token variable">@&#39;localhost&#39;</span> identified <span class="token keyword">by</span> <span class="token string">&#39;250cf8b51c773f3f8dc8b4be867a9a02&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除用户" tabindex="-1"><a class="header-anchor" href="#删除用户"><span>删除用户</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">user</span> lisi<span class="token variable">@localhost</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="修改用户" tabindex="-1"><a class="header-anchor" href="#修改用户"><span>修改用户</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">rename</span> <span class="token keyword">user</span> <span class="token string">&#39;zhangsan&#39;</span><span class="token variable">@&#39;localhost&#39;</span> <span class="token keyword">to</span> <span class="token string">&#39;wangwu&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="修改用户口令" tabindex="-1"><a class="header-anchor" href="#修改用户口令"><span>修改用户口令</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">select</span> md5<span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">set</span> password <span class="token keyword">for</span> <span class="token string">&#39;wangwu&#39;</span><span class="token variable">@&#39;localhost&#39;</span> <span class="token operator">=</span><span class="token string">&#39;5d41402abc4b2a76b9719d911017c592&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看用户权限" tabindex="-1"><a class="header-anchor" href="#查看用户权限"><span>查看用户权限</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">show</span> grants <span class="token keyword">for</span> <span class="token string">&#39;wangwu&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="分配权限" tabindex="-1"><a class="header-anchor" href="#分配权限"><span>分配权限</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">select</span><span class="token punctuation">(</span>cust_id<span class="token punctuation">,</span>cust_name<span class="token punctuation">)</span>
<span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>customers
<span class="token keyword">to</span> <span class="token string">&#39;zhangsan&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="分配用户及权限-已过时-用户和权限分开不在合并一起" tabindex="-1"><a class="header-anchor" href="#分配用户及权限-已过时-用户和权限分开不在合并一起"><span>分配用户及权限(已过时),用户和权限分开不在合并一起</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">select</span><span class="token punctuation">,</span><span class="token keyword">update</span> <span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>customers
<span class="token keyword">to</span> <span class="token string">&#39;liming&#39;</span><span class="token variable">@&#39;localhost&#39;</span> identified <span class="token keyword">by</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">,</span>
<span class="token string">&#39;huang&#39;</span><span class="token variable">@&#39;localhost&#39;</span> identified <span class="token keyword">by</span> <span class="token string">&#39;789&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="分配用户执行所有数据库操作" tabindex="-1"><a class="header-anchor" href="#分配用户执行所有数据库操作"><span>分配用户执行所有数据库操作</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">&#39;wangwu&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="分配用户创建用户权限" tabindex="-1"><a class="header-anchor" href="#分配用户创建用户权限"><span>分配用户创建用户权限</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">&#39;wangwu&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="授予表权限时-语法项-priv-type-可以指定维以下值" tabindex="-1"><a class="header-anchor" href="#授予表权限时-语法项-priv-type-可以指定维以下值"><span>授予表权限时,语法项“priv_type” 可以指定维以下值</span></a></h3><p>SELECT: INSERT: DELETE: UPDATE: REFERENCES: CREATE: ALTER: INDEX: DROP: ALL或ALL PRIVILEGES</p><p>授予列权限时，语法项&quot;priv_type&quot;的值只能指定为SELECT、INSERT、UPDATE 授予数据库权限时,语法项&quot;priv_type&quot;的值指定为以下值 SELECT: INSERT: DELETE: UPDATE: REFERENCES: CREATE: ALTER: INDEX: DROP: CREATE TEMPORARY TABLES: CREATE VIEW: SHOW VIEW: CREATE ROUTINE: ALTER ROUTINE: EXECUTE ROUTINE: LOCK TABLES: ALL 或 ALL PRIVILEGES:</p><p>CREATE USER: SHOW DATABASES:</p><h3 id="对用户授权并且可以将自身的权限授予其他用户" tabindex="-1"><a class="header-anchor" href="#对用户授权并且可以将自身的权限授予其他用户"><span>对用户授权并且可以将自身的权限授予其他用户</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> mysql_test<span class="token punctuation">.</span>customers
<span class="token keyword">TO</span> <span class="token string">&#39;ZHOU&#39;</span><span class="token variable">@&#39;LOCALHOST&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&#39;123&#39;</span>
<span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="权限撤销" tabindex="-1"><a class="header-anchor" href="#权限撤销"><span>权限撤销</span></a></h3><p>撤销特定用户所有权限</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">revoke</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span><span class="token punctuation">,</span><span class="token keyword">grant</span> <span class="token keyword">option</span> <span class="token keyword">from</span> <span class="token string">&#39;wangwu&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="撤销select权限" tabindex="-1"><a class="header-anchor" href="#撤销select权限"><span>撤销SELECT权限</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">revoke</span> <span class="token keyword">select</span> <span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">from</span> <span class="token string">&#39;zhou&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="备份" tabindex="-1"><a class="header-anchor" href="#备份"><span>备份</span></a></h2><p>值之间用逗号分隔 如果是字符则用双引号 用？号结束标志</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">lock</span> <span class="token keyword">tables</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">read</span> <span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers
<span class="token keyword">into</span> <span class="token keyword">OUTFILE</span> <span class="token string">&#39;C:\\backup\\backupfile.txt&#39;</span>
<span class="token keyword">FIELDS</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&#39;,&#39;</span> 
<span class="token keyword">optionally</span> <span class="token keyword">enclosed</span> <span class="token keyword">by</span> <span class="token string">&#39;&quot;&#39;</span> 
<span class="token keyword">lines</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&#39;?&#39;</span><span class="token punctuation">;</span> 

<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">&quot;secure_file_priv&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="恢复" tabindex="-1"><a class="header-anchor" href="#恢复"><span>恢复</span></a></h2><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> mysql_test<span class="token punctuation">.</span>customers_copy <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql_test<span class="token punctuation">.</span>customers <span class="token keyword">where</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">lock</span> <span class="token keyword">tables</span> mysql_test<span class="token punctuation">.</span>customers_copy <span class="token keyword">write</span><span class="token punctuation">;</span>
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">infile</span> <span class="token string">&#39;c:/backup/backupfile.txt&#39;</span>
<span class="token keyword">into</span> <span class="token keyword">table</span> mysql_test<span class="token punctuation">.</span>customers_copy
<span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&#39;,&#39;</span>
<span class="token keyword">optionally</span> <span class="token keyword">enclosed</span> <span class="token keyword">by</span> <span class="token string">&#39;&quot;&#39;</span>
<span class="token keyword">lines</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&#39;?&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">unlock</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h2><ul><li>示例一</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">--创建数据库</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> db_test<span class="token punctuation">;</span>

<span class="token comment">--使用数据库</span>
<span class="token keyword">use</span> db_test<span class="token punctuation">;</span>

<span class="token comment">--创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> content
<span class="token punctuation">(</span>
    content_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    subject <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    words <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    face <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    createtime <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>content_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--创建用户</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">&#39;wanming&#39;</span><span class="token variable">@&#39;localhost&#39;</span> identified <span class="token keyword">by</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">;</span>

<span class="token comment">--分配查询、更新权限</span>
<span class="token keyword">grant</span> <span class="token keyword">select</span><span class="token punctuation">,</span><span class="token keyword">update</span> 
    <span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>content
<span class="token keyword">to</span> <span class="token string">&#39;wangming&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> db_test<span class="token punctuation">.</span>content <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&#39;MySql问题请教&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;MySQL对表数据的基本操作有哪些?&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;MySQL初学者&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;face.jpg&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;tom@gmail.com&#39;</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--更新数据</span>
<span class="token keyword">update</span> db_test<span class="token punctuation">.</span>content <span class="token keyword">set</span> words<span class="token operator">=</span><span class="token string">&#39;如何使用INSERT语句&#39;</span> <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">&#39;MySQL初学者&#39;</span><span class="token punctuation">;</span>

<span class="token comment">--删除数据</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> db_test<span class="token punctuation">.</span>content <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">&#39;MySQL初学者&#39;</span><span class="token punctuation">;</span>

<span class="token comment">--查询数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> db_test<span class="token punctuation">.</span>content<span class="token punctuation">;</span>

<span class="token comment">--创建触发器</span>
<span class="token keyword">create</span> <span class="token keyword">trigger</span> content_delete_trigger before <span class="token keyword">delete</span> 
<span class="token keyword">on</span> mysql_test<span class="token punctuation">.</span>content <span class="token keyword">for each row</span> <span class="token keyword">set</span> <span class="token variable">@str</span><span class="token operator">=</span><span class="token string">&#39;old content deleted&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>示例二</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">--创建数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> db_xuanke<span class="token punctuation">;</span>

<span class="token comment">--使用数据库</span>
<span class="token keyword">use</span> db_xuanke<span class="token punctuation">;</span>

<span class="token comment">--创建表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> student
<span class="token punctuation">(</span>
    StuNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--学号 主码</span>
    StuName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--姓名</span>
    StuSex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--性别</span>
    Pwd <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&#39;00000000&#39;</span><span class="token punctuation">,</span><span class="token comment">--密码</span>
    DeptNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--所属院系</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>StuNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--院系编码表</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> deptcode
<span class="token punctuation">(</span>
    DeptNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--院系编码 主码</span>
    DeptName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--系名</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>DeptNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--院系表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> department
<span class="token punctuation">(</span>
    DeptNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--院系编码 主码</span>
    Numofstudent <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--学生人数</span>
    Numofteather <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--教师人数</span>
    DeptAddr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--办公地点</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>DeptNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--教师表</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> teacher
<span class="token punctuation">(</span>
    TeachNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--职工号 主码</span>
    TeachName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--姓名</span>
    TeachSex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--性别</span>
    TeachAge <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--年龄</span>
    TeachTitle <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--职称</span>
    Pwd <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&#39;00000000&#39;</span><span class="token punctuation">,</span> <span class="token comment">--登录密码</span>
    DeptNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--所属院系</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>TeachNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--课程编码表</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> coursecode
<span class="token punctuation">(</span>
 CourseNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--课程号 主码</span>
 CourseName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--课程名称</span>
 <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>CourseNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--课程表 course</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> Course
<span class="token punctuation">(</span>
    CourseNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token punctuation">,</span><span class="token comment">--课程号(主码)</span>
    CourseType <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--课程类别</span>
    Credit <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--学分</span>
    CourseTime <span class="token keyword">date</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--上课时间</span>
    CourseAddr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--上课地点</span>
    DeptName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--开课学院</span>
    Limitofnum <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--限选人数</span>
    TeachNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--职工号</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>CourseNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--系统管理员表</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> administrator
<span class="token punctuation">(</span>
    AdminNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--ID号 主码</span>
    AdminName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--姓名</span>
    Pwd <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&#39;00000000&#39;</span><span class="token punctuation">,</span> <span class="token comment">--登录密码</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>AdminNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--选修课</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> electing
<span class="token punctuation">(</span>
StuNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--学号 主码</span>
CourseNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--课程号(主码)</span>
Score <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--成绩</span>
<span class="token keyword">Primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>StuNo<span class="token punctuation">,</span>CourseNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--管理学生表</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> adminstu
<span class="token punctuation">(</span>
    AdminNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--管理员ID号(主码)</span>
    StuNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--学生号 主码</span>
    OpTime <span class="token keyword">date</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--操作时间</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>AdminNo<span class="token punctuation">,</span>StuNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--管理院系表</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> admindept
<span class="token punctuation">(</span>
    AdminNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--管理员ID 主码</span>
    DeptNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--院系编码 主码</span>
    OpTime <span class="token keyword">Date</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--操作时间</span>
    <span class="token keyword">Primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>AdminNo<span class="token punctuation">,</span>DeptNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--管理教师表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> adminteacher
<span class="token punctuation">(</span>
    AdminNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--管理员ID 主码</span>
    TeachNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token punctuation">,</span><span class="token comment">--职工号 主码</span>
    OpTime <span class="token keyword">date</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment">--操作时间</span>
    <span class="token keyword">Primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>AdminNo<span class="token punctuation">,</span>TeachNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--管理课程</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> admincourse
<span class="token punctuation">(</span>
    AdminNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--管理员ID 主码</span>
    CourseNo <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--课程号 主码</span>
    OpTime <span class="token keyword">date</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--操作时间</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>adminNo<span class="token punctuation">,</span>CourseNo<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--分配用户权限</span>
<span class="token keyword">grant</span> <span class="token keyword">select</span><span class="token punctuation">,</span><span class="token keyword">update</span><span class="token punctuation">,</span><span class="token keyword">insert</span><span class="token punctuation">,</span><span class="token keyword">delete</span>
<span class="token keyword">on</span> db_xuanke<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">to</span> <span class="token string">&#39;jin&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>

<span class="token comment">--添加学生</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> db_xuanke<span class="token punctuation">.</span>student
<span class="token keyword">set</span> StuNo<span class="token operator">=</span><span class="token number">20170922</span><span class="token punctuation">,</span>StuName<span class="token operator">=</span><span class="token string">&#39;黄然&#39;</span><span class="token punctuation">,</span>StuSex<span class="token operator">=</span><span class="token string">&#39;女&#39;</span><span class="token punctuation">,</span>pwd<span class="token operator">=</span><span class="token keyword">default</span><span class="token punctuation">,</span>
deptno<span class="token operator">=</span><span class="token keyword">select</span> deptno <span class="token keyword">from</span> db_xuanke<span class="token punctuation">.</span>deptcode <span class="token keyword">where</span> deptname<span class="token operator">=</span><span class="token string">&#39;计算机学院&#39;</span><span class="token punctuation">;</span>

<span class="token comment">--添加触发器 验证分值是否在0~100</span>
<span class="token keyword">drop</span> <span class="token keyword">trigger</span> tri_test<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">trigger</span> tri_test <span class="token keyword">after</span> <span class="token keyword">insert</span> <span class="token keyword">on</span> db_xuanke<span class="token punctuation">.</span>electing
<span class="token keyword">for each row</span> <span class="token keyword">begin</span>
<span class="token keyword">if</span> new<span class="token punctuation">.</span>score<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">or</span> new<span class="token punctuation">.</span>score<span class="token operator">&gt;</span><span class="token number">100</span> <span class="token keyword">then</span>
    <span class="token keyword">delete</span> <span class="token keyword">from</span> db_xuanke<span class="token punctuation">.</span>electing <span class="token keyword">where</span> score<span class="token operator">=</span>new<span class="token punctuation">.</span>score<span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment">--查询表</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> db_xuanke<span class="token punctuation">.</span>electing
<span class="token comment">--删除表数据</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> db_xuanke<span class="token punctuation">.</span>electing<span class="token punctuation">;</span>
<span class="token comment">--插入表数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> db_xuanke<span class="token punctuation">.</span>electing <span class="token keyword">set</span> stuno<span class="token operator">=</span><span class="token string">&#39;20170922&#39;</span><span class="token punctuation">,</span>courseNo<span class="token operator">=</span><span class="token string">&#39;01&#39;</span><span class="token punctuation">,</span>score<span class="token operator">=</span><span class="token number">98</span><span class="token punctuation">;</span>

<span class="token comment">--事务并发控制</span>
<span class="token keyword">begin</span><span class="token punctuation">;</span>
    <span class="token keyword">insert</span> <span class="token keyword">into</span> db_xuanke<span class="token punctuation">.</span>teacher <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">10021</span><span class="token punctuation">,</span><span class="token string">&#39;万明&#39;</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token keyword">default</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">insert</span> <span class="token keyword">into</span> db_xuanke<span class="token punctuation">.</span>teacher <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">10073</span><span class="token punctuation">,</span><span class="token string">&#39;黄新&#39;</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token keyword">default</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">insert</span> <span class="token keyword">into</span> db_xuanke<span class="token punctuation">.</span>teacher <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">10031</span><span class="token punctuation">,</span><span class="token string">&#39;徐丽&#39;</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token keyword">default</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>

<span class="token comment">--创建视图视图</span>
<span class="token keyword">Create</span> <span class="token keyword">view</span> v_score<span class="token punctuation">(</span>stuno<span class="token punctuation">,</span>totlescore<span class="token punctuation">)</span>
<span class="token keyword">as</span>
    <span class="token keyword">select</span> student<span class="token punctuation">.</span>stuno<span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>course<span class="token punctuation">.</span>credit<span class="token punctuation">)</span>
    <span class="token keyword">from</span> student <span class="token keyword">join</span> electing <span class="token keyword">on</span> student<span class="token punctuation">.</span>StuNo<span class="token operator">=</span>electing<span class="token punctuation">.</span>StuNo
    <span class="token keyword">join</span> course <span class="token keyword">on</span> course<span class="token punctuation">.</span>CourseNo<span class="token operator">=</span>electing<span class="token punctuation">.</span>CourseNo
    <span class="token keyword">where</span> electing<span class="token punctuation">.</span>score<span class="token operator">&gt;=</span><span class="token number">60</span>
    <span class="token keyword">group</span> <span class="token keyword">by</span> student<span class="token punctuation">.</span>stuno<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 982474256@qq.com">乌龙茶</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link active prev" href="/tools/databases/" aria-label="概述"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->概述</div></a><a class="route-link nav-link next" href="/tools/databases/mariadb.html" aria-label="Mariadb"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Mariadb<!----></div></a></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-Ks4gHtJg.js" defer></script>
  </body>
</html>
